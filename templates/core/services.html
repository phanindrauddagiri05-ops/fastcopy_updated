{% extends 'base.html' %}
{% block content %}

<section class="bg-white py-12 border-b">
    <div class="container mx-auto px-6 text-center" data-aos="fade-down">
        <h1 class="text-4xl font-bold text-gray-800">Our Services</h1>
        <p class="text-gray-500 mt-2 text-lg">Select a service and customize your order requirements.</p>
    </div>
</section>

<div class="container mx-auto px-6 py-10">
    <div class="flex flex-nowrap overflow-x-auto space-x-4 pb-6 mb-10 no-scrollbar">
        {% for service in services %}
        <button onclick="selectService('{{ service.name }}', '{{ forloop.counter }}')" 
                id="tab-{{ forloop.counter }}"
                class="service-tab flex items-center gap-3 px-8 py-4 rounded-xl font-bold transition-all whitespace-nowrap bg-white border shadow-sm hover:shadow-md">
            <i class="fas {{ service.icon_class }} text-xl"></i>
            {{ service.name }}
        </button>
        {% endfor %}
    </div>

    <div id="form-card" class="max-w-4xl mx-auto bg-white rounded-3xl shadow-2xl overflow-hidden border border-gray-100" data-aos="zoom-in">
        <div id="form-banner" class="bg-blue-600 p-6 text-white transition-colors duration-500">
            <h2 id="display-service-name" class="text-2xl font-black uppercase tracking-widest">Printing</h2>
        </div>

        <form action="#" method="POST" enctype="multipart/form-data" class="p-8 md:p-12 space-y-8">
            {% csrf_token %}
            
            <div class="space-y-4">
                <h3 class="text-lg font-bold flex items-center gap-2"><span class="bg-gray-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">1</span> Your Information</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <input type="text" name="name" placeholder="Full Name" required class="w-full border-2 p-4 rounded-xl focus:ring-2 outline-none transition-all">
                    <input type="text" name="phone" placeholder="Phone Number" required class="w-full border-2 p-4 rounded-xl focus:ring-2 outline-none transition-all">
                </div>
            </div>

            <div class="space-y-4">
                <h3 class="text-lg font-bold flex items-center gap-2"><span class="bg-gray-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">2</span> Upload Your Document</h3>
                <div class="relative border-2 border-dashed border-gray-300 rounded-2xl p-10 text-center hover:bg-gray-50 transition-all group">
                    <input type="file" name="file" class="absolute inset-0 opacity-0 cursor-pointer" id="fileInput">
                    <div class="space-y-2">
                        <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 group-hover:scale-110 transition-transform"></i>
                        <p class="font-semibold text-gray-600">Click to upload or drag & drop</p>
                        <p class="text-xs text-gray-400 uppercase">PDF, DOCX, JPG (Max 50MB)</p>
                    </div>
                </div>
            </div>

            <div class="space-y-4">
                <h3 class="text-lg font-bold flex items-center gap-2"><span class="bg-gray-800 text-white w-6 h-6 rounded-full flex items-center justify-center text-xs">3</span> Choose Options</h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label class="text-sm font-bold text-gray-600 mb-2 block">Printing Type</label>
                        <select id="printType" class="w-full border-2 p-3 rounded-xl bg-white" onchange="updatePrice()">
                            <option value="2">Black & White (₹2)</option>
                            <option value="10">Color (₹10)</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-sm font-bold text-gray-600 mb-2 block">Side Type</label>
                        <select id="sideType" class="w-full border-2 p-3 rounded-xl bg-white" onchange="updatePrice()">
                            <option value="1">One Side</option>
                            <option value="2">Two Sides</option>
                        </select>
                    </div>
                    <div>
                        <label class="text-sm font-bold text-gray-600 mb-2 block">Copies</label>
                        <input type="number" id="copies" value="1" min="1" class="w-full border-2 p-3 rounded-xl" oninput="updatePrice()">
                    </div>
                </div>
            </div>

            <div class="bg-gray-50 p-6 rounded-2xl border-2 flex justify-between items-center">
                <span class="text-gray-500 font-bold uppercase tracking-wider">Total Price:</span>
                <span class="text-4xl font-black text-gray-900">₹<span id="price-tag">2</span></span>
            </div>

            <div class="flex flex-col md:flex-row gap-4">
                <button type="submit" class="flex-1 bg-green-600 text-white py-5 rounded-2xl font-black text-lg hover:bg-green-700 shadow-lg transition-all">ORDER NOW</button>
                <button type="button" class="flex-1 bg-gray-100 text-gray-800 py-5 rounded-2xl font-black text-lg hover:bg-gray-200 transition-all border">ADD TO CART</button>
            </div>
        </form>
    </div>
</div>

<script>
    const config = {
        'Printing': '#2563eb',
        'Spiral Binding': '#9333ea',
        'Soft Binding': '#db2777',
        'Custom Printing': '#059669',
        'Thesis Binding': '#d97706',
        'Photo Frames': '#dc2626'
    };

    function selectService(name, id) {
        // Update Title & Color
        document.getElementById('display-service-name').innerText = name;
        const color = config[name] || '#2563eb';
        document.getElementById('form-banner').style.backgroundColor = color;
        
        // Tab UI Update
        document.querySelectorAll('.service-tab').forEach(tab => {
            tab.classList.remove('bg-gray-900', 'text-white', 'border-gray-900');
            tab.classList.add('bg-white', 'text-gray-800');
        });
        const activeTab = document.getElementById('tab-'+id);
        activeTab.classList.remove('bg-white', 'text-gray-800');
        activeTab.classList.add('bg-gray-900', 'text-white', 'border-gray-900');

        updatePrice();
    }

    function updatePrice() {
        const rate = parseFloat(document.getElementById('printType').value);
        const copies = parseInt(document.getElementById('copies').value) || 1;
        // Basic calculation logic (Rate * Copies)
        // You can add logic for 'pages' once file is analyzed
        const total = rate * copies;
        document.getElementById('price-tag').innerText = total;
    }

    // Default Select first tab
    window.onload = () => document.querySelector('.service-tab').click();
</script>

<style>
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
</style>

{% endblock %}