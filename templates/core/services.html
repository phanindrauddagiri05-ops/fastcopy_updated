{% extends 'base.html' %}
{% block content %}
<section class="glass-header py-20 text-center" data-aos="fade-down">
    <div class="container mx-auto px-6">
        <h1 class="text-6xl font-black text-slate-900 tracking-tighter uppercase mb-4">Our Premium Services</h1>
        <p class="text-slate-500 text-lg max-w-2xl mx-auto leading-relaxed">
            High-quality printing and binding solutions delivered at your doorstep. 
            Select a service below to customize your order.
        </p>
    </div>
</section>

<div class="container mx-auto px-6 py-12">
    <div class="flex overflow-x-auto space-x-8 pb-12 no-scrollbar justify-center">
        {% for s in services %}
        <div onclick="selectService('{{ s.name }}', '{{ forloop.counter }}')" 
             id="tab-{{ forloop.counter }}"
             class="service-tab bg-white p-10 rounded-[3rem] flex flex-col items-center gap-4 min-w-[200px] border-2">
            <i class="fas {{ s.icon_class }} text-4xl text-slate-400"></i>
            <span class="font-black uppercase text-xs tracking-widest text-slate-800">{{ s.name }}</span>
        </div>
        {% endfor %}
    </div>

    <div id="main-form-card" class="max-w-4xl mx-auto bg-white border-t-[15px] rounded-[3.5rem] shadow-2xl overflow-hidden transition-all duration-700" data-aos="zoom-in">
        
        <div id="form-header-bg" class="p-12 text-white flex justify-between items-center transition-colors duration-500">
            <div>
                <h2 id="service-title-display" class="text-4xl font-black uppercase italic tracking-tighter">Printing</h2>
                <p id="service-desc" class="opacity-80 text-xs font-bold uppercase tracking-widest mt-2"></p>
            </div>
            <i id="floating-icon" class="fas fa-print text-6xl opacity-20 floating-3d"></i>
        </div>

        <form method="POST" enctype="multipart/form-data" class="p-10 space-y-16">
            {% csrf_token %}
            <input type="hidden" name="service_name" id="hidden_service_name">
            <input type="hidden" name="total_price_hidden" id="total_price_hidden" value="0">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="relative group">
                    <input type="text" name="name" required class="custom-input peer placeholder-transparent" id="name_input">
                    <label class="absolute left-6 -top-2.5 bg-white px-2 text-xs font-black text-slate-400 peer-placeholder-shown:text-base peer-placeholder-shown:top-5 peer-focus:-top-2.5 peer-focus:text-xs transition-all">FULL NAME</label>
                </div>
                <div class="relative">
                    <span class="absolute left-6 top-5 font-black text-slate-300">+91</span>
                    <input type="text" name="phone" required class="custom-input pl-16" placeholder="PHONE NUMBER">
                </div>
            </div>

            <div class="dropzone-box relative overflow-hidden group">
                <input type="file" name="document" accept=".pdf" class="absolute inset-0 opacity-0 cursor-pointer z-10" onchange="handleFileUpload(this)">
                <div id="upload-status" class="space-y-4">
                    <i class="fas fa-cloud-upload-alt text-6xl text-slate-300 group-hover:text-blue-500 transition-colors floating-3d"></i>
                    <p class="font-black text-slate-800 tracking-tight">CLICK OR DRAG & DROP PDF</p>
                    <p class="text-[10px] text-slate-400 font-bold uppercase">Automatic Page Detection Enabled</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <select id="print-type" name="print_type" class="custom-input" onchange="updatePrice()">
                    <option value="bw">Black & White (₹2)</option>
                    <option value="color">Full Color (₹10)</option>
                </select>
                <select id="side-type" name="side_type" class="custom-input" onchange="updatePrice()">
                    <option value="1">One Side</option>
                    <option value="2">Two Sides</option>
                    <option value="0.5">1/2 Page</option>
                    <option value="0.25">1/4 Page</option>
                </select>
                <div class="flex items-center custom-input">
                    <button type="button" onclick="const i = document.getElementById('copy-count'); i.value = Math.max(1, parseInt(i.value)-1); updatePrice()" class="text-slate-400 hover:text-slate-900 transition"><i class="fas fa-minus"></i></button>
                    <input type="number" id="copy-count" name="copies" value="1" min="1" class="flex-1 text-center bg-transparent border-none outline-none font-black" readonly>
                    <button type="button" onclick="const i = document.getElementById('copy-count'); i.value = parseInt(i.value)+1; updatePrice()" class="text-slate-400 hover:text-slate-900 transition"><i class="fas fa-plus"></i></button>
                </div>
            </div>

            <div class="bg-slate-900 p-12 rounded-[3rem] flex flex-col md:flex-row justify-between items-center gap-8 shadow-2xl">
                <div>
                    <p class="text-[10px] font-black uppercase text-blue-400 tracking-widest">Estimated Total</p>
                    <h4 id="price-display" class="text-6xl font-black text-white mt-1">₹0</h4>
                    <p class="text-[10px] font-bold text-slate-500 mt-2 uppercase tracking-widest">Pages: <span id="detected-pages-label">0</span></p>
                </div>
                <div class="flex gap-4 w-full md:w-auto">
                    <button type="button" onclick="addToCart()" class="flex-1 bg-transparent text-white border-2 border-slate-700 px-10 py-5 rounded-2xl font-black uppercase hover:bg-white hover:text-slate-900 transition-all">Add to Cart</button>
                    <button type="submit" id="order-now-btn" class="flex-1 px-12 py-5 rounded-2xl text-white font-black uppercase shadow-xl hover:scale-105 transition-all">Order Now</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% endblock %}